@model dev_backend_habitly_eixo2.Models.Habito

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Habito</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.IdUsuario)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.IdUsuario)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.TituloHabito)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.TituloHabito)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.DescricaoHabito)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.DescricaoHabito)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.PeriodicidadeHabito)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.PeriodicidadeHabito)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.StatusHabito)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.StatusHabito)
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model?.IdHabito">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>

<div class="mt-4">
    <h4>Etiquetas</h4>
    @if (Model?.Etiquetas != null && Model.Etiquetas.Any())
    {
        <ul>
        @foreach (var et in Model.Etiquetas)
        {
            <li>
                @et.Nome
                <form asp-controller="Etiquetas" asp-action="RemoveFromHabito" method="post" style="display:inline">
                    <input type="hidden" name="idEtiqueta" value="@et.IdEtiqueta" />
                    <input type="hidden" name="idHabito" value="@Model.IdHabito" />
                    @Html.AntiForgeryToken()
                    <button type="submit" class="btn btn-sm btn-link">Remove</button>
                </form>
            </li>
        }
        </ul>
    }
    else
    {
        <p>No etiquetas assigned.</p>
    }

    <!-- A seleção múltipla de etiquetas via checkboxes foi removida (redundante). Use 'Create new etiqueta' ou a página /Etiquetas -->

    <hr />
    <h5>Create new etiqueta</h5>
    <form asp-controller="Etiquetas" asp-action="CreateAndAddToHabito" method="post" class="form-inline">
        @Html.AntiForgeryToken()
        <input type="hidden" name="idHabito" value="@Model.IdHabito" />
        <div class="form-group" style="margin-right:10px">
            <input type="text" name="nome" class="form-control" placeholder="Nome da etiqueta" required style="width:250px" />
        </div>
        <button type="submit" class="btn btn-success">Create & Add</button>
    </form>

    <h5 class="mt-3">Archive habit</h5>
    @if (!Model.IsArquivado)
    {
        <form asp-controller="Etiquetas" asp-action="ArchiveHabito" method="post">
            @Html.AntiForgeryToken()
            <input type="hidden" name="idHabito" value="@Model.IdHabito" />
            <button type="submit" class="btn btn-warning">Archive</button>
        </form>
    }
    else
    {
        <span class="text-muted">This habit is archived.</span>
    }

</div>
